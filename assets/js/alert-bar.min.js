!function($){window.DBI_ALERT_BAR={init:function(){$(".alert-bar").length&&(DBI_ALERT_BAR.setup_alert_bars(),DBI_ALERT_BAR.toggle_email_form())},setup_alert_bars:function(){var $alert_bars=$(".alert-bar");$alert_bars.length<=0||($("body").wrapInner('<div class="js-body-wrap" />'),$alert_bars.each(function(){if(!$.cookie("dbrains-coupon")&&!$.cookie("dbrains-coupon-error")){var alert_bar=$(this).data("slug"),$notice=$(this);$notice[0]&&($(".dismiss",$notice).click(function(e){e.preventDefault(),$(this).parents(".alert-bar").hasClass("alert-bar-narrow")?$(this).parents(".alert-bar").addClass("alert-bar--narrow").removeClass("alert-bar--show-form"):$(this).parents(".alert-bar").hide(),$.cookie(alert_bar,1,{expires:365,path:"/"})}),$.cookie(alert_bar)?$notice.hasClass("alert-bar-narrow")&&$notice.addClass("alert-bar--narrow").show():$(document).ready(function(){setTimeout(function(){if($notice.hasClass("alert-bar-footer")){var $last_footer=$("footer").last();$notice.insertAfter($last_footer).show(),$notice.hasClass("alert-bar-sticky")&&$("body").addClass("footer-sticky-alert-bar").css("padding-bottom",$last_footer.height())}else $notice.insertBefore($notice.closest(".js-body-wrap")).css("margin-top",-1*$notice.outerHeight()).show().animate({"margin-top":0},800);var $timer=$notice.find(".alert-bar__countdown");0<$timer.length&&DBI_ALERT_BAR.setup_countdown($timer)},1e3)}))}}))},toggle_email_form:function(){$(".alert-bar .dbi-btn__toggle-form").on("click",function(e){e.preventDefault();var $alert_bar=$(this).parents(".alert-bar");if($alert_bar.hasClass("alert-bar--narrow"))return $alert_bar.removeClass("alert-bar--narrow"),$timer=$alert_bar.find(".alert-bar__countdown"),void(0<$timer.length&&DBI_ALERT_BAR.setup_countdown($timer));$alert_bar.addClass("alert-bar--show-form").find('input[type="email"]').focus()})},setup_countdown:function($timer){var date=$timer.data("timer-date"),$days=$timer.find(".days"),$hours=$timer.find(".hours"),$minutes=$timer.find(".minutes"),$seconds=$timer.find(".seconds");DBI_ALERT_BAR.update_countdown(date,$days,$hours,$minutes,$seconds);var interval=setInterval(function(){DBI_ALERT_BAR.update_countdown(date,$days,$hours,$minutes,$seconds).total<=0&&clearInterval(interval)},1e3)},update_countdown:function(date,$days,$hours,$minutes,$seconds){var remaining=DBI_ALERT_BAR.calculate_time_remaining(date);return $days.html(remaining.days),$hours.html(remaining.hours),$minutes.html(remaining.minutes),$seconds.html(remaining.seconds),remaining},calculate_time_remaining:function(end_time){var time=Date.parse(end_time)-Date.parse(new Date),seconds=Math.floor(time/1e3%60),minutes=Math.floor(time/1e3/60%60),hours=Math.floor(time/36e5%24),days=Math.floor(time/864e5);return{total:time,days:0<days?days:0,hours:0<hours?hours:0,minutes:0<minutes?minutes:0,seconds:0<=seconds?("0"+seconds).slice(-2):0}}},$(document).ready(function(){DBI_ALERT_BAR.init()})}(jQuery);